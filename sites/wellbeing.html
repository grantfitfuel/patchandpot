<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Wellbeing</title>
  <link rel="stylesheet" href="style.css">
  <style>
    :root{
      --brand-green:#2F4F2F;
      --brand-green-2:#3a6b3a;
      --brand-green-3:#5b8e5b;
      --ink:#fff;
    }

    /* Global site nav */
    .site-nav { background:#111; padding:.5rem 1rem; display:flex; gap:1rem; }
    .site-nav a { color:#eee; text-decoration:none; font-size:0.95rem; }
    .site-nav a:hover { text-decoration:underline; }

    /* Wellbeing mini-nav buttons */
    .wb-nav { margin:1rem 0; display:flex; flex-wrap:wrap; gap:.5rem; }
    .wb-nav a {
      background:var(--brand-green); color:var(--ink);
      padding:.45rem .8rem; border-radius:6px; text-decoration:none; font-size:.9rem;
    }
    .wb-nav a:hover { background:var(--brand-green-2); }
    .wb-nav a:active { background:var(--brand-green-3); }

    /* Cards */
    .card { background:#1a1a1a; border:1px solid #333; border-radius:8px; padding:1rem; margin:1rem 0; }
    .disclaimer { background:#161616; border-left:4px solid #555; padding:.8rem; margin:2rem 0 1rem; font-size:.9rem; color:#ddd; }

    /* Accessibility block smaller */
    .a11y-card { max-width:500px; font-size:.9rem; }
    .a11y-card h2 { font-size:1.1rem; margin-top:0; }
    .accessibility-controls { display:flex; gap:.75rem; flex-wrap:wrap; margin:.5rem 0; }
    .accessibility-controls label { font-size:.85rem; }
    .video-wrap { position:relative; max-width:480px; border-radius:6px; overflow:hidden; }
    #wb-video { width:100%; height:auto; }
    #bsl-overlay { position:absolute; right:.5rem; bottom:.5rem; width:25%; border-radius:.25rem; box-shadow:0 1px 8px rgba(0,0,0,.3); background:#000; }
    #bsl-overlay.minimised { width:90px; height:60px; overflow:hidden; }
    #bsl-chrome { position:absolute; top:0; right:0; display:flex; gap:.25rem; padding:.15rem; }
    #bsl-chrome button { background:#222; color:#eee; border:1px solid #444; border-radius:3px; width:22px; height:20px; font-size:12px; line-height:18px; cursor:pointer; }
    .hidden { display:none !important; }
    .visually-hidden { position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; border:0; }

    footer { text-align:center; color:#ccc; font-size:.9rem; padding:2rem 0; }
  </style>
</head>
<body>

<!-- Site-wide nav -->
<nav class="site-nav" aria-label="Main site navigation">
  <a href="index.html">Home</a>
  <a href="fitness.html">Fitness</a>
  <a href="fuel.html">Fuel</a>
  <a href="wellbeing.html">Wellbeing</a>
  <a href="gardening.html">Gardening</a>
</nav>

<header>
  <h1>Wellbeing</h1>
  <p>Practical support for mind and body. Start small, keep it kind, and build gently.</p>

  <!-- Wellbeing buttons -->
  <nav class="wb-nav" aria-label="Wellbeing section navigation">
    <a href="wellbeing/therapies-tools.html">Therapies &amp; Tools</a>
    <a href="wellbeing/depression.html">Depression</a>
    <a href="wellbeing/anxiety.html">Anxiety</a>
    <a href="wellbeing/grief.html">Grief</a>
    <a href="wellbeing/carers.html">Carers</a>
    <a href="wellbeing/neuroscience.html">Neuroscience</a>
    <a href="wellbeing/neurodiversity.html">Neurodiversity</a>
    <a href="wellbeing/bullying-online-safety.html">Bullying &amp; Online Safety</a>
    <a href="wellbeing/addictions-compulsions.html">Addictions &amp; Compulsions</a>
    <a href="wellbeing/suicide-bereavement.html">Suicide Bereavement</a>
    <a href="wellbeing/crisis.html">Crisis</a>
    <a href="wellbeing/abuse.html">Abuse</a>
  </nav>
</header>

<main>

  <!-- Accessibility block smaller -->
  <section class="card a11y-card" aria-labelledby="a11y-video-title">
    <h2 id="a11y-video-title">Grounding technique</h2>
    <section class="accessibility-controls" aria-label="Accessibility controls">
      <label><input type="checkbox" id="pref-bsl"> Show BSL interpreter</label>
      <label><input type="checkbox" id="pref-ad"> Enable audio description</label>
    </section>
    <div class="video-wrap">
      <video id="wb-video" controls preload="metadata"
             poster="/img/wellbeing/grounding-poster.jpg" aria-describedby="wb-video-desc">
        <source src="/media/wellbeing/grounding-technique.mp4" type="video/mp4">
        <track kind="captions" src="/media/wellbeing/grounding-technique.en.vtt" srclang="en" label="English captions" default>
        <track kind="descriptions" src="/media/wellbeing/grounding-technique.ad.vtt" srclang="en" label="Audio description">
      </video>
      <div id="bsl-overlay" class="hidden minimised" aria-hidden="true">
        <div id="bsl-chrome"><button id="bsl-min">—</button><button id="bsl-close">×</button></div>
        <video id="bsl-video" muted playsinline>
          <source src="/media/wellbeing/grounding-technique-bsl.mp4" type="video/mp4">
        </video>
      </div>
      <p id="wb-video-desc" class="visually-hidden">Video with captions; optional audio description and BSL interpreter overlay.</p>
    </div>
  </section>

  <!-- Healthy Ageing block -->
  <section class="card" aria-labelledby="healthy-ageing-title">
    <h2 id="healthy-ageing-title">Healthy Ageing</h2>
    <p>Core strength, balance and flexibility for over-50s and over-60s. Realistic options, seated variations, and safety tips.</p>
    <p>
      <a class="button" href="/pdf/healthy-ageing-pack.pdf" download>Healthy Ageing Pack (PDF)</a>
      <a class="button" href="/pdf/chair-yoga.pdf" download>Chair Yoga (PDF)</a>
      <a class="button" href="/pdf/tai-chi.pdf" download>Tai Chi (PDF)</a>
      <a class="button" href="/pdf/qi-gong.pdf" download>Qi Gong (PDF)</a>
    </p>
  </section>

  <!-- Crisis note -->
  <section class="card" aria-labelledby="crisis-title">
    <h2 id="crisis-title">If things feel urgent</h2>
    <p>If you feel at immediate risk, call <strong>999</strong>. Unsure what to do? Call <strong>NHS 111</strong>. Speak to your GP. 
    Listening support: <strong>Samaritans 116 123</strong> (24/7). Scotland: <strong>Breathing Space 0800 83 85 87</strong>.</p>
  </section>

  <!-- Disclaimer -->
  <section class="disclaimer" role="note">
    <p><strong>Disclaimer:</strong> Information here supports wellbeing and is not a substitute for medical advice. 
    If you have existing health conditions or new/worsening symptoms, speak to your GP or call NHS 111. 
    If you feel at immediate risk, call 999.</p>
  </section>
</main>

<footer>
  <p>Grant Cameron Anthony</p>
</footer>

<script>
(function(){
  const bsl = document.getElementById('pref-bsl');
  const ad  = document.getElementById('pref-ad');
  const wrap= document.getElementById('bsl-overlay');
  const ov  = document.getElementById('bsl-video');
  const vid = document.getElementById('wb-video');
  const btnMin = document.getElementById('bsl-min');
  const btnClose = document.getElementById('bsl-close');

  let prefs = {};
  try { prefs = JSON.parse(localStorage.getItem('a11y-prefs') || '{}'); } catch(e){}
  bsl.checked = !!prefs.bsl; ad.checked = !!prefs.ad;
  if (bsl.checked){ wrap.classList.remove('hidden'); wrap.setAttribute('aria-hidden','false'); }

  for (const t of (vid.textTracks||[])) {
    if (t.kind==='descriptions') t.mode = ad.checked ? 'showing':'disabled';
  }

  function sync(){ try{ ov.currentTime=vid.currentTime; }catch(e){} }
  ['play','seeked','pause','ended'].forEach(ev=>{
    vid.addEventListener(ev, ()=>{ if (wrap.classList.contains('hidden')) return;
      if(ev==='play'){ sync(); ov.play().catch(()=>{}); }
      if(ev==='pause'||ev==='ended') ov.pause();
      if(ev==='seeked') sync();
    });
  });

  bsl.addEventListener('change', ()=>{
    if(bsl.checked){ wrap.classList.remove('hidden'); wrap.setAttribute('aria-hidden','false'); if(!vid.paused){ sync(); ov.play().catch(()=>{}); } }
    else{ ov.pause(); wrap.classList.add('hidden'); wrap.setAttribute('aria-hidden','true'); }
    save();
  });
  ad.addEventListener('change', ()=>{
    for(const t of(vid.textTracks||[])){ if(t.kind==='descriptions') t.mode = ad.checked?'showing':'disabled'; }
    save();
  });
  btnMin.addEventListener('click', ()=> wrap.classList.toggle('minimised'));
  btnClose.addEventListener('click', ()=>{ ov.pause(); wrap.classList.add('hidden'); wrap.setAttribute('aria-hidden','true'); });
  function save(){ localStorage.setItem('a11y-prefs', JSON.stringify({bsl:bsl.checked,ad:ad.checked})); }
})();
</script>
</body>
</html>
