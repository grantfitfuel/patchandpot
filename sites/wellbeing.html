<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Wellbeing</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Brand colours (fallbacks if your CSS variables aren't present) */
    :root{
      --brand-green:#2F4F2F;
      --brand-green-2:#3a6b3a;
      --brand-green-3:#5b8e5b;
      --ink:#fff;
      --panel:#111; /* keep dark look */
      --panel-border:#333;
    }

    /* Button-styled mini-nav */
    .wb-nav { margin: 1rem 0; display:flex; flex-wrap:wrap; gap:.5rem; }
    .wb-nav a {
      background: var(--brand-green);
      color: var(--ink);
      padding:.55rem 0.9rem;
      border-radius:8px;
      text-decoration:none;
      font-size:0.95rem;
      border:1px solid rgba(255,255,255,.08);
    }
    .wb-nav a:hover { background: var(--brand-green-2); }
    .wb-nav a:active { background: var(--brand-green-3); }

    /* Cards keep dark site aesthetic */
    .card { background: var(--panel); border:1px solid var(--panel-border); border-radius:10px; padding:1rem; margin:1rem 0; }
    .disclaimer { background:#161616; border-left:4px solid #555; padding:1rem; margin:2rem 0 1rem; color:#ddd; }

    /* Accessibility block */
    .accessibility-controls { display:flex; gap:1rem; align-items:center; padding:.5rem 0; }
    .accessibility-controls input { transform: translateY(1px); }
    .video-wrap { position: relative; max-width: 720px; }
    #bsl-overlay {
      position:absolute; right:1rem; bottom:1rem; width:22%;
      border-radius:.5rem; box-shadow:0 2px 12px rgba(0,0,0,.35);
      background:#000;
    }
    #bsl-overlay.minimised { width:120px; height:68px; overflow:hidden; }
    #bsl-chrome {
      position:absolute; top:0; left:0; right:0; height:28px;
      display:flex; gap:.35rem; align-items:center; justify-content:flex-end;
      background:rgba(0,0,0,.55);
      padding:0 .35rem;
    }
    #bsl-chrome button{
      background:#222; color:#eee; border:1px solid #444; border-radius:4px;
      width:26px; height:22px; line-height:20px; font-size:14px; padding:0; cursor:pointer;
    }
    #bsl-chrome button:hover{ background:#333; }
    .hidden { display:none !important; }
    .visually-hidden { position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; border:0; padding:0; margin:-1px; }

    /* Reusable button */
    .button { display:inline-block; padding:.6rem .9rem; border:1px solid #3a3a3a; border-radius:8px; text-decoration:none; color:#fff; background:#2a2a2a; }
    .button:hover { background:#3a3a3a; }
    footer { text-align:center; color:#ccc; font-size:.95rem; padding:2rem 0; }
  </style>
</head>
<body>

<header>
  <h1>Wellbeing</h1>
  <p>Practical support for mind and body. Start small, keep it kind, and build gently.</p>

  <!-- FULL set of Wellbeing buttons (green, matches site) -->
  <nav class="wb-nav" aria-label="Wellbeing section navigation">
    <a href="wellbeing/therapies-tools.html">Therapies &amp; Tools</a>
    <a href="wellbeing/depression.html">Depression</a>
    <a href="wellbeing/anxiety.html">Anxiety</a>
    <a href="wellbeing/grief.html">Grief</a>
    <a href="wellbeing/carers.html">Carers</a>
    <a href="wellbeing/neuroscience.html">Neuroscience</a>
    <a href="wellbeing/neurodiversity.html">Neurodiversity</a>
    <a href="wellbeing/bullying-online-safety.html">Bullying &amp; Online Safety</a>
    <a href="wellbeing/addictions-compulsions.html">Addictions &amp; Compulsions</a>
    <a href="wellbeing/suicide-bereavement.html">Suicide Bereavement</a>
    <a href="wellbeing/crisis.html">Crisis</a>
    <a href="wellbeing/abuse.html">Abuse</a>
  </nav>
</header>

<main>

  <!-- Accessibility controls + BSL/AD video demo block -->
  <section class="card" aria-labelledby="a11y-video-title">
    <h2 id="a11y-video-title">Grounding technique (with accessibility options)</h2>

    <section class="accessibility-controls" aria-label="Accessibility controls">
      <label><input type="checkbox" id="pref-bsl"> Show BSL interpreter</label>
      <label><input type="checkbox" id="pref-ad"> Enable audio description</label>
    </section>

    <div class="video-wrap">
      <video id="wb-video" controls preload="metadata" width="720" aria-describedby="wb-video-desc"
             poster="/img/wellbeing/grounding-poster.jpg">
        <!-- Replace with your actual media when ready -->
        <source src="/media/wellbeing/grounding-technique.mp4" type="video/mp4">
        <track kind="captions" src="/media/wellbeing/grounding-technique.en.vtt" srclang="en" label="English captions" default>
        <track kind="descriptions" src="/media/wellbeing/grounding-technique.ad.vtt" srclang="en" label="Audio description">
        Sorry, your browser doesn’t support embedded videos.
      </video>

      <!-- BSL overlay video: starts hidden/minimised until user opts in -->
      <div id="bsl-overlay" class="hidden minimised" aria-hidden="true">
        <div id="bsl-chrome" aria-hidden="true">
          <button type="button" id="bsl-min" title="Minimise">—</button>
          <button type="button" id="bsl-close" title="Hide">×</button>
        </div>
        <video id="bsl-video" muted playsinline>
          <source src="/media/wellbeing/grounding-technique-bsl.mp4" type="video/mp4">
        </video>
      </div>

      <p id="wb-video-desc" class="visually-hidden">
        Demonstration video with captions; optional audio description and BSL interpreter overlay available via the controls above.
      </p>
    </div>
  </section>

  <!-- Quick starts -->
  <section class="card">
    <h2>Quick starts</h2>
    <ul>
      <li><a href="wellbeing/therapies-tools.html">Therapies &amp; Tools hub</a> — CBT basics, reframing, breathing, journaling, neuroscience.</li>
      <li><a href="wellbeing/depression.html">Depression</a> — understanding biology, simple steps, UK support.</li>
      <li><a href="wellbeing/anxiety.html">Anxiety</a> — grounding, breath, gentle exposure.</li>
      <li><a href="wellbeing/grief.html">Grief</a> — what helps now vs later, support links.</li>
      <li><a href="wellbeing/carers.html">Carers</a> — anticipatory grief, respite, planning tools.</li>
    </ul>
  </section>

  <!-- Healthy Ageing block -->
  <section class="card" aria-labelledby="healthy-ageing-title">
    <h2 id="healthy-ageing-title">Healthy Ageing</h2>
    <p>Core strength, balance and flexibility for over-50s and over-60s. Realistic options, seated variations, and safety tips.</p>
    <p>
      <a class="button" href="/pdf/healthy-ageing-pack.pdf" download>Healthy Ageing Pack (PDF)</a>
      <a class="button" href="/pdf/chair-yoga.pdf" download>Chair Yoga (PDF)</a>
      <a class="button" href="/pdf/tai-chi.pdf" download>Tai Chi (PDF)</a>
      <a class="button" href="/pdf/qi-gong.pdf" download>Qi Gong (PDF)</a>
    </p>
  </section>

  <!-- Crisis note -->
  <section class="card" aria-labelledby="crisis-title">
    <h2 id="crisis-title">If things feel urgent</h2>
    <p>If you feel at immediate risk, call <strong>999</strong>. If you’re unsure what to do, call <strong>NHS 111</strong>. You can also speak to your GP. 
    Listening support: <strong>Samaritans 116 123</strong> (24/7). In Scotland: <strong>Breathing Space 0800 83 85 87</strong>.</p>
  </section>

  <!-- Standard disclaimer -->
  <section class="disclaimer" role="note" aria-label="Disclaimer">
    <p><strong>Disclaimer:</strong> Information here supports wellbeing and is not a substitute for medical advice. 
    If you have existing health conditions or new/worsening symptoms, speak to your GP or call NHS 111. 
    If you feel at immediate risk, call 999.</p>
  </section>

</main>

<footer>
  <p>Grant Cameron Anthony</p>
</footer>

<!-- Accessibility JS (overlay starts hidden; can minimise or close) -->
<script>
(function(){
  const bsl = document.getElementById('pref-bsl');
  const ad  = document.getElementById('pref-ad');
  const wrap= document.getElementById('bsl-overlay');
  const ov  = document.getElementById('bsl-video');
  const vid = document.getElementById('wb-video');
  const btnMin = document.getElementById('bsl-min');
  const btnClose = document.getElementById('bsl-close');

  // Load saved prefs
  let prefs = {};
  try { prefs = JSON.parse(localStorage.getItem('a11y-prefs') || '{}'); } catch(e){}
  bsl.checked = !!prefs.bsl; ad.checked = !!prefs.ad;

  // Start hidden; only show if user opted in previously
  if (bsl.checked) {
    wrap.classList.remove('hidden');
    wrap.setAttribute('aria-hidden','false');
  }

  // AD track initial state
  for (const t of (vid.textTracks || [])) {
    if (t.kind === 'descriptions') t.mode = ad.checked ? 'showing' : 'disabled';
  }

  // Sync overlay playback to main video
  function sync() { try { ov.currentTime = vid.currentTime; } catch(e){} }
  ['play','seeked','timeupdate','pause','ended'].forEach(ev=>{
    vid.addEventListener(ev, ()=>{
      if (wrap.classList.contains('hidden')) return;
      if (ev==='play') { sync(); ov.play().catch(()=>{}); }
      if (ev==='pause' || ev==='ended') ov.pause();
      if (ev==='seeked') sync();
    });
  });

  // Checkbox toggles
  bsl.addEventListener('change', ()=>{
    if (bsl.checked){
      wrap.classList.remove('hidden');
      wrap.setAttribute('aria-hidden','false');
      if (!vid.paused){ sync(); ov.play().catch(()=>{}); }
    } else {
      ov.pause();
      wrap.classList.add('hidden');
      wrap.setAttribute('aria-hidden','true');
    }
    save();
  });

  ad.addEventListener('change', ()=>{
    for (const t of (vid.textTracks || [])) {
      if (t.kind === 'descriptions') t.mode = ad.checked ? 'showing' : 'disabled';
    }
    save();
  });

  // Minimise / Close buttons
  btnMin.addEventListener('click', ()=>{
    wrap.classList.toggle('minimised');
  });
  btnClose.addEventListener('click', ()=>{
    ov.pause();
    wrap.classList.add('hidden');
    wrap.setAttribute('aria-hidden','true');
    // keep checkbox state but hide overlay; user can re-open via minimise bar or untick/tick
  });

  function save(){
    localStorage.setItem('a11y-prefs', JSON.stringify({bsl:bsl.checked, ad:ad.checked}));
  }
})();
</script>

</body>
</html>
