/* =========================
   Patch & Pot — Global CSS
   v42 (hero fix + image sizing)
   ========================= */

/* ---------- Root + Reset ---------- */
:root{
  --bg:#0b120c;
  --panel:#0e1610;
  --panel-2:#111b14;
  --ink:#f0fff3;
  --ink-dim:#cfe7d4;
  --line:#1a2a1e;
  --accent:#4ade80;        /* green */
  --accent-2:#2ecc71;
  --muted:#9fb8a5;
  --shadow:0 8px 24px rgba(0,0,0,.35);
  --radius:14px;
  --radius-sm:10px;
  --wrap:1080px;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);-webkit-font-smoothing:antialiased;moz-osx-font-smoothing:grayscale}
img{max-width:100%;display:block}

/* ---------- Typography ---------- */
body{font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;}
h1,h2,h3{line-height:1.2;margin:0 0 .6rem}
h1{font-size:clamp(2rem,4vw,3.2rem);letter-spacing:.2px}
h2{font-size:clamp(1.4rem,2.6vw,2rem);margin-top:1.2rem}
h3{font-size:clamp(1.1rem,2vw,1.25rem)}
p{margin:.7rem 0 1rem}
.lead{font-size:1.1rem;color:var(--ink-dim)}

/* ---------- Layout ---------- */
.wrap{max-width:var(--wrap);margin:0 auto;padding:0 18px}
.grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
.card{background:var(--panel);border:1px solid var(--line);border-radius:var(--radius);padding:14px}

/* ---------- Header + Nav ---------- */
.site-header{
  position:sticky;top:0;z-index:50;background:rgba(11,18,12,.9);
  backdrop-filter:saturate(1.2) blur(6px);
  border-bottom:1px solid var(--line);
}
.site-header .brand{display:flex;align-items:center;gap:10px;padding:10px 18px}
.site-header .logo{height:28px;width:auto}
.site-header .site-title{font-weight:650}

.nav{display:flex;gap:18px;margin-left:auto;padding:0 18px}
.nav a{color:var(--ink);text-decoration:none;padding:22px 0;display:inline-block;opacity:.9}
.nav a[aria-current="page"]{color:var(--accent)}
.nav a:hover{opacity:1}

.menu-toggle{display:none;position:absolute;right:14px;top:10px;width:44px;height:44px;border:0;background:#121a14;border-radius:12px;align-items:center;justify-content:center}
.menu-ico{display:inline-block;width:22px;height:16px;position:relative}
.menu-ico span{position:absolute;left:0;right:0;height:2px;background:#fff;border-radius:2px;opacity:.95}
.menu-ico span:nth-child(1){top:0}
.menu-ico span:nth-child(2){top:7px}
.menu-ico span:nth-child(3){bottom:0}

@media (max-width: 860px){
  .menu-toggle{display:flex}
  .nav{
    display:none;position:absolute;right:10px;top:64px;flex-direction:column;background:var(--panel);
    border:1px solid var(--line);border-radius:14px;min-width:220px;box-shadow:var(--shadow);padding:6px;
  }
  .site-header.menu-open .nav{display:flex}
  .nav a{padding:12px 14px}
}

/* ---------- Buttons ---------- */
.btn{display:inline-block;padding:.7rem 1rem;border-radius:12px;text-decoration:none;border:1px solid var(--line);background:var(--panel-2);color:var(--ink)}
.btn.primary{background:linear-gradient(180deg,var(--accent),var(--accent-2));color:#071207;border:none;font-weight:700}
.btn.ghost{background:transparent}

/* ---------- Homepage HERO (stays large) ---------- */
/* The homepage uses <header class="hero"><figure><img>… */
.hero{position:relative;isolation:isolate}
.hero figure{margin:0;position:relative}
.hero figure img{
  width:100%;
  height:64vh;               /* big visual */
  min-height:420px;
  object-fit:cover;
  max-height:none;           /* <-- critical: never cap the home hero */
  border-bottom-left-radius:18px;border-bottom-right-radius:18px;
}
.hero .overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.08),rgba(0,0,0,.35))}
.hero .content{position:absolute;inset:0;display:flex;align-items:center}
.eyebrow{display:inline-block;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.2);color:#fff;padding:.35rem .7rem;border-radius:999px;margin-bottom:.5rem}

/* ---------- Page “hero” figures (interior pages) ---------- */
/* Default: contained, centered, NOT dominating  */
.page-hero{margin:10px auto 16px}
.page-hero img{
  display:block;margin:0 auto;
  width:100%;height:auto;
  max-width:100%;
  max-height:420px;          /* modest on pages */
  object-fit:contain;        /* do not crop */
  object-position:center;
  border-radius:12px;
}
.page-hero--tall img{max-height:520px}
.page-hero--contain img{object-fit:contain}
.page-hero--cover img{object-fit:cover}

/* Center images that don’t span full width (e.g., narrow images) */
.page-hero img,
main figure img{ /* ensure centering rule applies */
  margin-left:auto;margin-right:auto;
}

/* ---------- Content images (site-wide, excluding home hero) ---------- */
/* IMPORTANT: this affects only IMAGES INSIDE <main>, NOT the homepage .hero */
main figure{margin:12px 0}
main figure img{
  display:block;
  margin:0 auto;
  max-width:90%;
  height:auto;
  max-height:340px;          /* smaller so they don’t dominate */
  object-fit:contain;         /* never crop regular content images */
  border-radius:10px;
  background:rgba(255,255,255,.02);
}

/* Optional caption styling */
.cap{display:block;color:var(--muted);font-size:.92rem;margin-top:.35rem}

/* ---------- Mini-nav (pills) ---------- */
.mini-nav{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0 16px}
.mini-nav a{
  display:inline-block;padding:.45rem .7rem;border-radius:999px;
  border:1px solid var(--line);background:var(--panel-2);color:var(--ink);text-decoration:none;font-size:.95rem;
}
.mini-nav a:hover{border-color:#203423}

/* ---------- Teaser tiles / guides grid ---------- */
.teaser-tiles,.guides-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));margin:10px 0}
.tile{background:var(--panel-2);border:1px solid var(--line);border-radius:var(--radius);padding:12px}

/* ---------- Disclaimer ---------- */
.disclaimer{
  background:linear-gradient(180deg,#0d1711,#0a120c);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:14px;
  margin:18px 0;
}
.disclaimer h2{margin-top:0}

/* ---------- Footer ---------- */
footer{border-top:1px solid var(--line);background:var(--panel);margin-top:24px}
.footer-inner{display:flex;align-items:center;gap:10px;justify-content:space-between;padding:18px}
.footer-icon{height:26px}

/* ---------- Utilities ---------- */
.meta{color:var(--muted);font-size:.95rem}

/* ---------- Bullying page: ensure hero centers if narrow ---------- */
.page-hero.center img{object-position:center}

/* ---------- Accessibility tweaks ---------- */
:focus-visible{outline:2px solid var(--accent);outline-offset:2px;border-radius:6px}
