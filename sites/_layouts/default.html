<!doctype html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <title>{{ page.title | escape }}{% if page.title and site.title %} â€” {{ site.title }}{% endif %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="{{ '/img/favicon.ico' | relative_url }}">
  <!-- Main theme CSS (cache-busted each build) -->
  <link rel="stylesheet" href="{{ '/assets/css/site.css' | relative_url }}?v={{ site.time | date: '%s' }}">

  <!-- Minimal hotfix layer (safe to remove once moved into site.css) -->
  <style id="pp-hotfix">
    :root{ --bg:#0b0f14; --ink:#e6f0ea; --glass:#0f131a; --stroke:#1f2630; }
    html,body{ background:var(--bg); color:var(--ink); }
    .wrap{ max-width:1100px; margin:0 auto; padding:0 20px; }

    /* Header + nav */
    .site-header{ background:#0a0f0c; border-bottom:1px solid var(--stroke); position:sticky; top:0; z-index:50 }
    .site-header .wrap{ display:flex; align-items:center; justify-content:space-between; gap:14px; padding:12px 20px; }
    .site-header .brand{ display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--ink); }
    .site-header .logo{ height:28px; width:auto; }
    .site-header .nav{ display:flex; gap:14px; }
    .site-header .nav a{ color:#cfe9dc; text-decoration:none; padding:6px 8px; border-radius:8px; }
    .site-header .nav a:hover{ background:#101612; }
    .menu-toggle{ background:transparent; border:0; color:var(--ink); display:none; }
    .menu-ico{ display:inline-block; width:22px; height:16px; }
    .menu-ico span{ display:block; height:2px; background:var(--ink); margin:3px 0; }
    @media (max-width:820px){
      .menu-toggle{ display:inline-block; }
      .site-header .nav{
        display:none; flex-direction:column; background:#0a0f0c; border-top:1px solid var(--stroke);
        margin:0 20px 12px; padding:8px; border-radius:12px; box-shadow:0 10px 24px rgba(0,0,0,.3);
      }
      .site-header .nav.open{ display:flex; }
    }

    /* Footer */
    .site-footer{ background:#0a0f0c; border-top:1px solid var(--stroke); margin-top:24px; }
    .site-footer .wrap{ display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between; padding:14px 20px; }
    .footer-icon{ height:36px; width:auto; opacity:.95; }
    .foot-nav{ display:flex; flex-wrap:wrap; gap:10px; }
    .foot-nav a{ color:#cfe9dc; text-decoration:none; padding:4px 8px; border-radius:8px; }
    .foot-nav a:hover{ background:#101612; }

    /* Links */
    a{ color:#7ed495; }

    /* HERO sizing + readability */
    .hero{ position:relative; isolation:isolate; }
    .hero figure{ position:relative; margin:0; height:clamp(220px, 32vh, 420px); overflow:hidden; }
    .hero figure img{ width:100%; height:100%; object-fit:cover; object-position:center; display:block; }
    .hero figure .overlay{ position:absolute; inset:0;
      background:linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.15) 55%, rgba(0,0,0,.55)); pointer-events:none; }
    .hero .content{ position:absolute; inset:0; display:flex; align-items:flex-end; }
    .hero .content .wrap{ padding:18px 20px 24px; }
    .hero .eyebrow{ display:inline-block; font-weight:600; letter-spacing:.02em; opacity:.9 }
    .hero h1{ margin:.25rem 0 .35rem; font-size:clamp(1.6rem, 2.6vw + 1rem, 2.4rem); line-height:1.15 }
    .hero .lead{ color:#d7e6dd }

    /* Prevent sticky header overlap when jumping to first element */
    main .wrap > :first-child{ scroll-margin-top:72px }

    /* Global image safety */
    img{ max-width:100%; height:auto; display:block }
    figure img{ width:100%; height:auto }

    /* Optional helper for banner-style images in content */
    .banner-img{ width:100%; height:clamp(180px, 30vh, 360px); object-fit:cover; border-radius:12px }

    /* Cards contrast */
    .card, .section{ background:rgba(255,255,255,.04); border:1px solid var(--stroke,#1f2630); border-radius:16px }
    .card .lead, .section .lead{ color:#cfe1d7 }
    .card h2, .section h2{ color:#eaf5ee }
  </style>
</head>
<body class="theme-dark">
  {% include header.html %}

  <main>
    {{ content }}
  </main>

  {% include footer.html %}

  <!-- Tiny, dependency-free mobile nav toggle -->
  <script>
    (function(){
      var btn=document.querySelector('.menu-toggle');
      var nav=document.getElementById('primaryNav');
      if(btn && nav){
        btn.addEventListener('click', function(){
          var open=nav.classList.toggle('open');
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        });
      }
    })();
  </script>

  <!-- Your site JS (kept as-is, cache-busted) -->
  <script src="{{ '/js/sites.js' | relative_url }}?v={{ site.time | date: '%s' }}" defer></script>
</body>
</html>
